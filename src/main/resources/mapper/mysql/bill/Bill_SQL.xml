<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bills">
	
		<select id="billsSelect" resultType="hashmap" >
			SELECT * 
			FROM dy_bills_provider
		</select>
		
		<select id="billsSelect2" resultType="hashmap" >
			SELECT * 
			FROM dy_bills_supplied
		</select>
		
		<select id="billsSelect_one" resultType="hashmap" parameterType="String">
			SELECT * 
			FROM dy_bills_provider
			WHERE dbp_keyno = #{dbp_keyno}
		</select>
		
		
		<insert id="billsProvideInsert" parameterType="billDTO">
			INSERT INTO dy_bills_provider
			(
				dbp_id,
				dbp_pass,
				dbp_apikey,
				dbp_co_num,
				dbp_biztype,
				dbp_name,
				dbp_bizclassification,
				dbp_ceoname,
				dbp_busename,
				dbp_ir_name,
				dbp_ir_cell,
				dbp_email,
				dbp_address
			)VALUES(
				#{hometaxbill_id},
				#{spass},
				#{apikey},
				#{ir_companynumber},
				#{ir_biztype},
				#{ir_companyname},
				#{ir_bizclassification},
				#{ir_ceoname},
				#{ir_busename},
				#{ir_name},
				#{ir_cell},
				#{ir_email},
				#{ir_companyaddress}
			)
		</insert>
		
		<update id="billsProvideUPdate" parameterType="billDTO">
			UPDATE dy_bills_provider 
			SET dbp_id = #{hometaxbill_id},
				dbp_pass = #{spass},
				dbp_apikey = #{apikey},
				dbp_co_num = #{ir_companynumber},
				dbp_biztype = #{ir_biztype},
				dbp_name = #{ir_companyname},
				dbp_bizclassification = #{ir_bizclassification},
				dbp_ceoname = #{ir_ceoname},
				dbp_busename = #{ir_busename},
				dbp_ir_name = #{ir_name},
				dbp_ir_cell = #{ir_cell},
				dbp_email = #{ir_email},
				dbp_address = #{ir_companyaddress},
			WHERE dbp_keyno = #{dbp_keyno}
		</update>
		
		<!-- 사업등록번호 카운팅 -->
		<select id="billCount" resultType="int" parameterType="billDTO">
			SELECT COUNT(*) FROM dy_bills_provider WHERE dbp_co_num = #{ir_companynumber}
		</select>
		<select id="billsSelect2" resultType="hashmap" >
			SELECT * 
			FROM dy_bills_supplied
		</select>
		
		<select id="SuppliedSelect_one" resultType="hashmap" parameterType="String">
			SELECT * 
			FROM dy_bills_supplied
			WHERE dbs_keyno = #{dbs_keyno}
		</select>
	
	
		<insert id="billsProvideInsert2" parameterType="billDTO">
		INSERT INTO dy_bills_supplied
		(
			dbs_co_num,
			dbs_biztype ,
			dbs_name,
			dbs_bizclassification,
			dbs_taxnum,
			dbs_ceoname,
			dbs_busename1,
			dbs_name1,
			dbs_cell1,
			dbs_email1,
			dbs_busename2,
			dbs_name2,
			dbs_cell2,
			dbs_email2,
			dbs_address
		)VALUES(
			#{ie_companynumber},
			#{ie_biztype},
			#{ie_companyname},
			#{ie_bizclassification},
			#{ie_taxnumber},
			#{ie_ceoname},
			#{ie_busename1},
			#{ie_name1},
			#{ie_cell1},
			#{ie_email1},
			#{ie_busename2},
			#{ie_name2},
			#{ie_cell2},
			#{ie_email2},
			#{ie_companyaddress}
		)
	</insert>
	
	<update id="billsProvideUPdate2" parameterType="billDTO">
		UPDATE dy_bills_supplied 
		SET dbs_co_num = #{ie_companynumber},
			dbs_biztype = #{ie_biztype},
			dbs_name = #{ie_companyname},
			dbs_bizclassification = #{ie_bizclassification},
			dbs_taxnum = #{ie_taxnumber},
			dbs_ceoname = #{ie_ceoname},
			dbs_busename1 = #{ie_busename1},
			dbs_name1 = #{ie_name1},
			dbs_cell1 = #{ie_cell1},
			dbs_email1 = #{ie_email1},
			dbs_busename2 = #{ie_busename2},
			dbs_name2 = #{ie_name2},
			dbs_cell2 = #{ie_cell2},
			dbs_email2 = #{ie_email2},
			dbs_address = #{ie_companyaddress}
		WHERE dbs_keyno = #{dbs_keyno}
	</update>
	
	<!-- 사업등록번호 카운팅 공급받는자 -->
	<select id="billCount2" resultType="int" parameterType="billDTO">
		SELECT COUNT(*) FROM dy_bills_supplied WHERE dbs_co_num = #{ie_companynumber}
	</select>
</mapper>
 